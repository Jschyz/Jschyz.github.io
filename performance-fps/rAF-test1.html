<!DOCTYPE html>
<html>
<head>
  <title></title>
  <meta charset="utf-8">
  <style>
    .mover {
      background: url("https://www.html5rocks.com/en/tutorials/speed/rendering/particle.png");
      height: 100px;
      width: 100px;
      position: absolute;
    }
  </style>
</head>
<body>
<div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>
  <div class="mover"></div>

</div>

<script>
  // polyfill. See http://paulirish.com/2011/requestanimationframe-for-smart-animating/
  var rAF = (function(){
    return  window.requestAnimationFrame       ||
        window.webkitRequestAnimationFrame ||
        window.mozRequestAnimationFrame    ||
        window.oRequestAnimationFrame      ||
        window.msRequestAnimationFrame     ||
        function( callback ){
          window.setTimeout(callback, 1000 / 60);
        };
  })();

  // Set the heights for all these movers in simple CSS style.top
  var movers = document.querySelectorAll('.mover');
  (function init() {
    for(var m = 0; m < movers.length; m++) {
      movers[m].style.top = (m * 20) + 'px';
    }
  })();

  // animation loop
  function update(timestamp) {
    for(var m = 0; m < movers.length; m++) {
      movers[m].style.left = ((Math.sin(movers[m].offsetTop + timestamp/1000)+1) * 500) + 'px';
//      movers[m].style.left = ((Math.sin(m + timestamp/1000)+1) * 500) + 'px';
    }
    rAF(update);
  };
  rAF(update);


  window.addEventListener('DOMContentLoaded', function() {
    var t;
    var delay;
    function monitor(timestamp) {
      if (t) {
        // 打印帧数较卡
        delay = Math.floor(timestamp - t)
        delay > 0 && console.log('渲染时间：' + timestamp, delay)
      }
      t = timestamp;
      if (timestamp <= 4e3) requestAnimationFrame(monitor);
    }
    requestAnimationFrame(monitor);
  })
</script>
</body>
</html>
